<HTML>
<HEAD>
<META NAME="generator" CONTENT="ISE EiffelStudio version 14.05.9.5394 GPL Edition - windows">
<meta name="description" content="TTCondition variables allow threads to synchronize based on the content of a shared data, whereas TTmutexes only synchronize access to the data. In other words, a condition variable is a TTsynchronization object that enables threads to wait until a particular condition occurs. TT TTWhen a thread executes a `wait' call on a condition variable, it must hold an associated `mutex' TT(used for checking that condition). Then, it is immediately suspended and put into the waiting TTqueue. The thread is suspended and is waiting for the condition to occur.  TTEventually, when the condition has occurred, a thread will `signal' it. Two possible scenarios: TT- if there are threads waiting, then one of the waiting thread will resume its execution and TT  will get the `mutex' in a locked state. TT- if there are no threads waiting, nothing is done  TTFor the simple usage of a condition variable, it is very similar to using a semaphore. TT TTIn addition you have `broadcast' that will resume all waiting threads at once, and TT`wait_with_timeout' that will wait only a certain amount of time before abandonning the wait. TT TTThe `signal' and `broadcast' routines can be called by a thread whether or not it currently owns TTthe mutex that threads calling `wait' or `wait_with_timeout' have associated with the condition TTvariable during their waits. If, however, predictable scheduling behavior is required, then that TTmutex should be locked by the thread prior to calling `signal' or `broadcast'. TT TTAssuming `shared_data' an INTEGER initially set to zero, then a typical usage of condition variable TTto wait until `shared_data' becomes one, could be written as followed in thread A: TT TTTmutex.lock TTTfrom TTTuntil TTTTshared_data = 1 TTTloop TTTTcondition_variable.wait (mutex) TTTend TTTmutex.unlock TTT TTand in thread B: TT TTTmutex.lock TTTshared_data := 1 TTTcondition_variable.signal TTTmutex.unlock TTT TTThread A will be blocked until thread B signal that now `shared_data' is 1."/>
<meta name="legal" content="See notice at end of class."/>
<meta name="keywords" content="Eiffel class"/>
<meta name="copyright" content="Copyright (c) 1984-2010, Eiffel Software and others"/>
<meta name="license" content="Eiffel Forum License v2 (see http://www.eiffel.com/licensing/forum.txt)"/>
<meta name="source" content="Eiffel Software 5949 Hollister Ave., Goleta, CA 93117 USA Telephone 805-685-1006, Fax 805-685-6869 Website http://www.eiffel.com Customer support http://support.eiffel.com"/>
<meta name="keywords" content="Eiffel class"/>
<TITLE>condition_variable Chart</TITLE>
<LINK REL="stylesheet" HREF="../default.css" TYPE="text/css">
<SCRIPT TYPE="text/javascript" SRC="../goto.html"></SCRIPT>
</HEAD>
<BODY>
<P ALIGN="CENTER">Automatic generation produced by ISE Eiffel</P>
<pre><FORM ONSUBMIT="go_to('../',this.c.value);return false;">
<TABLE CELLSPACING="5" CELLPADDING="4"><TR>
<TD CLASS="link1"><A CLASS="link1" HREF="../class_list.html">Classes</A></TD>
<TD CLASS="link1"><A CLASS="link1" HREF="../cluster_list.html">Clusters</A></TD>
<TD CLASS="link1"><A CLASS="link1" HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD>
<TD CLASS="nolink2">Chart</TD>
<TD CLASS="link2"><A CLASS="link2" HREF="condition_variable_links.html">Relations</A></TD>
<TD CLASS="link2"><A CLASS="link2" HREF="condition_variable.html">Text</A></TD>
<TD CLASS="link2">Go to: <INPUT NAME="c" VALUE="condition_variable"></TD>
</TR></TABLE></FORM><SPAN CLASS="ekeyword">class</SPAN>
	<A CLASS="eclass" HREF="../thread/condition_variable_chart.html">CONDITION_VARIABLE</A>

<SPAN CLASS="ekeyword">General</SPAN>
	<SPAN CLASS="eitag">cluster</SPAN><SPAN CLASS="esymbol">:</SPAN> <SPAN CLASS="necluster">thread</SPAN>
	<SPAN CLASS="eitag">description</SPAN><SPAN CLASS="esymbol">:</SPAN> 
		<SPAN CLASS="estring">&quot;Condition variables allow threads to synchronize based on the content of a shared data, whereas</SPAN>
		<SPAN CLASS="estring">mutexes only synchronize access to the data. In other words, a condition variable is a</SPAN>
		<SPAN CLASS="estring">synchronization object that enables threads to wait until a particular condition occurs.</SPAN>
		
		<SPAN CLASS="estring">When a thread executes a </SPAN><SPAN CLASS="estring">`wait'</SPAN><SPAN CLASS="estring"> call on a condition variable, it must hold an associated </SPAN><SPAN CLASS="estring">`mutex'</SPAN>
		<SPAN CLASS="estring">(used for checking that condition). Then, it is immediately suspended and put into the waiting</SPAN>
		<SPAN CLASS="estring">queue. The thread is suspended and is waiting for the condition to occur.</SPAN>
		
		<SPAN CLASS="estring">Eventually, when the condition has occurred, a thread will </SPAN><SPAN CLASS="estring">`signal'</SPAN><SPAN CLASS="estring"> it. Two possible scenarios:</SPAN>
		<SPAN CLASS="estring">- if there are threads waiting, then one of the waiting thread will resume its execution and</SPAN>
		<SPAN CLASS="estring"> &nbsp;will get the </SPAN><SPAN CLASS="estring">`mutex'</SPAN><SPAN CLASS="estring"> in a locked state.</SPAN>
		<SPAN CLASS="estring">- if there are no threads waiting, nothing is done</SPAN>
		
		<SPAN CLASS="estring">For the simple usage of a condition variable, it is very similar to using a semaphore.</SPAN>
		
		<SPAN CLASS="estring">In addition you have </SPAN><SPAN CLASS="estring">`broadcast'</SPAN><SPAN CLASS="estring"> that will resume all waiting threads at once, and</SPAN>
		<SPAN CLASS="estring">`wait_with_timeout'</SPAN><SPAN CLASS="estring"> that will wait only a certain amount of time before abandonning the wait.</SPAN>
		
		<SPAN CLASS="estring">The </SPAN><SPAN CLASS="estring">`signal'</SPAN><SPAN CLASS="estring"> and </SPAN><SPAN CLASS="estring">`broadcast'</SPAN><SPAN CLASS="estring"> routines can be called by a thread whether or not it currently owns</SPAN>
		<SPAN CLASS="estring">the mutex that threads calling </SPAN><SPAN CLASS="estring">`wait'</SPAN><SPAN CLASS="estring"> or </SPAN><SPAN CLASS="estring">`wait_with_timeout'</SPAN><SPAN CLASS="estring"> have associated with the condition</SPAN>
		<SPAN CLASS="estring">variable during their waits. If, however, predictable scheduling behavior is required, then that</SPAN>
		<SPAN CLASS="estring">mutex should be locked by the thread prior to calling </SPAN><SPAN CLASS="estring">`signal'</SPAN><SPAN CLASS="estring"> or </SPAN><SPAN CLASS="estring">`broadcast'</SPAN><SPAN CLASS="estring">.</SPAN>
		
		<SPAN CLASS="estring">Assuming </SPAN><SPAN CLASS="estring">`shared_data'</SPAN><SPAN CLASS="estring"> an INTEGER initially set to zero, then a typical usage of condition variable</SPAN>
		<SPAN CLASS="estring">to wait until </SPAN><SPAN CLASS="estring">`shared_data'</SPAN><SPAN CLASS="estring"> becomes one, could be written as followed in thread A:</SPAN>
		
		<SPAN CLASS="estring">mutex.lock</SPAN>
		<SPAN CLASS="estring">from</SPAN>
		<SPAN CLASS="estring">until</SPAN>
		<SPAN CLASS="estring">shared_data = 1</SPAN>
		<SPAN CLASS="estring">loop</SPAN>
		<SPAN CLASS="estring">condition_variable.wait (mutex)</SPAN>
		<SPAN CLASS="estring">end</SPAN>
		<SPAN CLASS="estring">mutex.unlock</SPAN>
		
		<SPAN CLASS="estring">and in thread B:</SPAN>
		
		<SPAN CLASS="estring">mutex.lock</SPAN>
		<SPAN CLASS="estring">shared_data := 1</SPAN>
		<SPAN CLASS="estring">condition_variable.signal</SPAN>
		<SPAN CLASS="estring">mutex.unlock</SPAN>
		
		<SPAN CLASS="estring">Thread A will be blocked until thread B signal that now </SPAN><SPAN CLASS="estring">`shared_data'</SPAN><SPAN CLASS="estring"> is 1.&quot;</SPAN>
	<SPAN CLASS="eitag">create</SPAN><SPAN CLASS="esymbol">:</SPAN> <A CLASS="efeature" HREF="../thread/condition_variable.html#f_make">make</A>

<SPAN CLASS="ekeyword">Ancestors</SPAN>
	<A CLASS="eclass" HREF="../base/disposable_chart.html">DISPOSABLE</A><SPAN CLASS="echar">*</SPAN>

<SPAN CLASS="ekeyword">Queries</SPAN>
	<SPAN TITLE="`is_set' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_is_set">is_set</A><SPAN CLASS="esymbol">:</SPAN> <A CLASS="eclass" HREF="../base/boolean_chart.html">BOOLEAN</A></SPAN>
	<SPAN TITLE="`wait_with_timeout' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_wait_with_timeout">wait_with_timeout</A> <SPAN CLASS="esymbol">(</SPAN><SPAN CLASS="elocal">a_mutex</SPAN><SPAN CLASS="esymbol">:</SPAN> <A CLASS="eclass" HREF="../thread/mutex_chart.html">MUTEX</A><SPAN CLASS="esymbol">;</SPAN> <SPAN CLASS="elocal">a_timeout_ms</SPAN><SPAN CLASS="esymbol">:</SPAN> <A CLASS="eclass" HREF="../base/integer_32_chart.html">INTEGER_32</A><SPAN CLASS="esymbol">)</SPAN><SPAN CLASS="esymbol">:</SPAN> <A CLASS="eclass" HREF="../base/boolean_chart.html">BOOLEAN</A></SPAN>

<SPAN CLASS="ekeyword">Commands</SPAN>
	<SPAN TITLE="`broadcast' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_broadcast">broadcast</A></SPAN>
	<SPAN TITLE="`destroy' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_destroy">destroy</A></SPAN>
	<SPAN TITLE="`signal' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_signal">signal</A></SPAN>
	<SPAN TITLE="`wait' is declared in `Current'"><A CLASS="efeature" HREF="../thread/condition_variable.html#f_wait">wait</A> <SPAN CLASS="esymbol">(</SPAN><SPAN CLASS="elocal">a_mutex</SPAN><SPAN CLASS="esymbol">:</SPAN> <A CLASS="eclass" HREF="../thread/mutex_chart.html">MUTEX</A><SPAN CLASS="esymbol">)</SPAN></SPAN>

<FORM ONSUBMIT="go_to('../',this.c.value);return false;">
<TABLE CELLSPACING="5" CELLPADDING="4"><TR>
<TD CLASS="link1"><A CLASS="link1" HREF="../class_list.html">Classes</A></TD>
<TD CLASS="link1"><A CLASS="link1" HREF="../cluster_list.html">Clusters</A></TD>
<TD CLASS="link1"><A CLASS="link1" HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD>
<TD CLASS="nolink2">Chart</TD>
<TD CLASS="link2"><A CLASS="link2" HREF="condition_variable_links.html">Relations</A></TD>
<TD CLASS="link2"><A CLASS="link2" HREF="condition_variable.html">Text</A></TD>
<TD CLASS="link2">Go to: <INPUT NAME="c" VALUE="condition_variable"></TD>
</TR></TABLE></FORM></pre>
<P ALIGN="CENTER"> &#045;&#045; Generated by ISE Eiffel &#045;&#045; 
<BR>For more details: <A HREF="http://www.eiffel.com">www.eiffel.com</A></P>
</BODY>
</HTML>
